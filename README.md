## Проект: Сервис по бронированию мероприятий с микросервисной архитектурой и асинхронной обработкой данных

### Описание проекта
Необходимо разработать RESTful веб-приложение для бронирования мест на различные мероприятия. Приложение будет состоять из микросервисов, где один сервис отвечает за управление пользователями, другой — за мероприятия и бронирования, а третий — за отправку уведомлений пользователям о подтверждении бронирования через email. Система должна использовать асинхронные задачи для обработки длительных операций и кеширование для ускорения работы с базой данных.

### Цели проекта
1. Прокачать понимание асинхронности и очередей.
2. Разобраться с микросервисной архитектурой и контейнеризацией.
3. Практиковаться с безопасностью (хеширование, CSRF, защита API).
4. Улучшить навыки работы с базами данных, индексами, транзакциями.
5. Разобраться с настройкой CI/CD для автоматизации тестирования и деплоя.

### Функциональные требования

#### 1. Микросервисная архитектура
- **Сервис аутентификации пользователей**: регистрация, авторизация через JWT.
- **Сервис мероприятий**: создание, редактирование, просмотр списка мероприятий, бронирование мест.
- **Сервис уведомлений**: отправка email-уведомлений о подтверждении бронирования. Должна быть асинхронная очередь для отправки писем.
- Каждый сервис должен быть развернут в отдельном Docker-контейнере и взаимодействовать через REST API.
- Настройка Docker Compose для управления всеми сервисами.

#### 2. Асинхронная обработка
- **Асинхронная отправка email-уведомлений** о подтверждении бронирования через Celery и Redis.
- Сервис уведомлений должен получать задания через очередь (например, RabbitMQ или Redis) и отправлять email.

#### 3. Работа с базой данных
- Использовать реляционную базу данных (PostgreSQL).
- **Индексация**: добавить индексы для ускорения поиска по мероприятиям и бронированиям.
- **Транзакции**: реализовать транзакции для процесса бронирования — пользователь должен бронировать место только если оно доступно, и данные о бронировании должны сохраняться только если все шаги транзакции выполнены успешно.
- Реализовать пагинацию для получения списка мероприятий через API.

#### 4. Безопасность
- **Хеширование паролей** при регистрации пользователей с использованием bcrypt или Argon2.
- **CSRF защита** для POST запросов (если используешь фронтенд).
- **Защита API**: аутентификация через JWT для доступа к бронированию мероприятий и личным данным пользователя.
- Убедись, что API не уязвимо для SQL-инъекций (проверь запросы и работу ORM).

#### 5. Оптимизация и кеширование
- Настроить кеширование с использованием Redis для хранения часто запрашиваемых данных, таких как список мероприятий. Например, при частом запросе списка мероприятий результат должен кешироваться на 5 минут.
- Реализовать стратегию сброса кеша при изменении информации о мероприятиях (например, при добавлении или удалении мероприятий).

#### 6. CI/CD
- Настроить **pipeline в GitLab CI** или другом инструменте для автоматизации тестирования и развертывания.
- Включить в pipeline автоматический запуск тестов и проверку кода (linting).
- Автоматизировать деплой на сервер (можно использовать Heroku или другой облачный сервис).

#### 7. Тестирование
- Написать **юнит-тесты** и **интеграционные тесты** для всех основных функций системы.
- Для тестирования взаимодействия микросервисов — использовать **мокирование**.
- Тестировать асинхронные задачи с Celery (проверить успешную отправку email).

### Технические требования

- **Фреймворк**: FastAPI (для каждого микросервиса).
- **База данных**: PostgreSQL.
- **Кеширование**: Redis.
- **Очереди**: RabbitMQ или Redis.
- **Асинхронные задачи**: Celery.
- **Контейнеризация**: Docker, Docker Compose.
- **Тестирование**: pytest, unittest.
- **CI/CD**: GitLab CI, Jenkins или другой.

### Этапы выполнения проекта

#### 1. Микросервисы и Docker
- Создать три микросервиса (аутентификация, мероприятия, уведомления).
- Развернуть каждый сервис в Docker-контейнере.
- Настроить Docker Compose для управления всеми сервисами.

#### 2. Асинхронные задачи и очереди
- Настроить Celery для асинхронной отправки email-уведомлений.
- Использовать Redis или RabbitMQ для обработки очередей.

#### 3. Работа с базой данных
- Настроить PostgreSQL для хранения данных пользователей и мероприятий.
- Реализовать транзакции для процесса бронирования.
- Добавить индексы для оптимизации запросов.

#### 4. Безопасность
- Реализовать аутентификацию через JWT.
- Настроить хеширование паролей.
- Защитить POST запросы от CSRF.

#### 5. Оптимизация и кеширование
- Настроить кеширование с использованием Redis.
- Реализовать пагинацию для API запросов.

#### 6. CI/CD и тестирование
- Настроить pipeline для автоматического тестирования и развертывания.
- Написать тесты для всех основных функций системы.

### Дополнительные задания (по желанию)
1. Изучить и интегрировать GraphQL вместо REST для одного из сервисов (например, для запроса мероприятий).
2. Добавить функционал нагрузочного тестирования системы (например, с использованием Locust или JMeter).
3. Развернуть проект в Kubernetes для масштабируемости и лучшей оркестрации контейнеров.

### Ожидаемые результаты:
1. Полноценное приложение с микросервисной архитектурой.
2. Асинхронные задачи для отправки уведомлений.
3. Оптимизированная работа с базой данных (индексы, транзакции).
4. Безопасность приложения: хеширование паролей, CSRF-защита, JWT-аутентификация.
5. Автоматизация тестирования и деплоя с помощью CI/CD.
